steps:
  - name: Checkout repo
    uses: actions/checkout@v3

  - name: Use Node.js
    uses: actions/setup-node@v3
    with:
      node-version: 18

  - name: Install dependencies
    run: npm install

  - name: Compile contracts
    run: npx hardhat compile

  - name: Deploy DMT via Biconomy Relayer
    env:
      PRIVATE_KEY: ${{ secrets.DEPLOYER_PRIVATE_KEY }}
      BICONOMY_API_KEY: ${{ secrets.BICONOMY_API_KEY }}
      RPC_URL: ${{ secrets.MAINNET_RPC_URL }}
    run: node scripts/deploy-dmt.js
